<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Djan Go</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,500;1,900&family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css_static/view_all_product.css">
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .card {
            width: 300px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 15px;
            position: relative;
            bottom: 0px;
            transition: all 0.3s ease;
            border: #666;
            box-shadow: 0px 0px 5px 0.3px rgba(0, 0, 0, 0.3)
        }
        .card:hover{
            position: relative;
            bottom: 5px;
        }
        .card img {
            width: 100%;
            height: auto;
        }
        .card-content {
            padding: 20px;
        }
        .product-name {
            margin-top: 0;
        }
        .description {
            color: #666;
        }
        .description p {
            margin: 10px;
            padding: 0;
            font-size: 14px;
        }
        .price {
            font-weight: bold;
            color:orange
        }
        .btn{
            cursor: pointer;
        }
        .floating_box{
            z-index: 4;
            visibility: hidden;
        }
        form p{
            font-size: 12px;
        }
        form span:hover{
            opacity: 0.6;
            cursor: pointer;
        }
        button:hover{
            opacity: 0.6;
        }
        input{
            padding-left: 5px;
        }
        
    </style>
</head>
<body class="bg-dark">

{% include "navbar.html" %}
<div class="box_navbar_slider" style="display:flex">
    <div class="sidebar" style="flex:1">
        <h2>Category</h2>
        <ul>
            {% for cate in category_list %}
                <li><a href="/product_catalog={{ cate.name }}"><i class="fa fa-dashboard"></i>{{ cate.name }}</a></li>
            {% endfor %}
        </ul>
    </div>  

    <section id="slider" style="flex:9">
        <div class="carousel slide" data-bs-ride="carousel" id="myslide" data-bs-interval="2300" data-bs-pause="false">
            <ol class="carousel-indicators">
                <button  data-bs-target="#myslide" data-bs-slide-to="0" class="active"></button>
                <button  data-bs-target="#myslide" data-bs-slide-to="1"></button>
                <button  data-bs-target="#myslide" data-bs-slide-to="2"></button>
                <button  data-bs-target="#myslide" data-bs-slide-to="3"></button>
            </ol>
            <div class="carousel-inner">
                <div style="margin-top: 700px;"></div>
                <div class="carousel-item carousel-image-2 active">
                    
                    <div class="container">
                        <div class="carousel-caption ">
                            <img style="width:900px;height: 569px;" src="https://upload.wikimedia.org/wikipedia/commons/a/a8/2024_Nissan_GT-R_Premium_edition_T-Spec.jpg" alt="">
                            <h1 class="display-3">Nissan GTR R35  เปิดประมูลแล้ว!</h1>
                            <p class="">Nissan GT-R R35 เป็นรถสปอร์ตคูเป้ระดับเรือธงที่ผลิตโดย Nissan ซึ่งเป็นรุ่นที่ 5 ของ Nissan GT-R และมีชื่อเสียงในวงการรถและนักเล่นรถทั่วโลก เป็นรถที่มีประสิทธิภาพสูงและดีไซน์ที่โดดเด่น </p>
                        </div>
                    </div>
                </div>
                <div class="carousel-item carousel-image-1">
                    <div class="container">
                        <div class="carousel-caption ">
                            <img style="width:900px;height: 569px;" src="https://thechicicon.com/wp-content/uploads/2022/11/richard_mille_rm_11-03-1_rectangle.jpg" alt="">
                            <h1 class="display-3">RM029 นาฬิกาเพื่อนสุดแพง</h1>
                            <p class="">RM029 เป็นรุ่นของ Richard Mille ซึ่งเป็นผู้ผลิตนาฬิกาลักษณะพิเศษและเป็นที่รู้จักในวงการนาฬิกาทั่วโลก </p>
                        </div>
                    </div>
                </div>
                <div class="carousel-item carousel-image-3">
                    <div class="container">
                        <div class="carousel-caption ">
                            <img style="width:900px;height: 569px; " src="https://www.headlightmag.com/hlmwp/wp-content/uploads/2022/04/Toyota-GR-Supra-6MT-01.jpg" alt="">
                            <h1 class="display-3">Toyota Supra MK5 เปิดประมูลแล้ว!</h1>
                            <p class="">รถสปอร์ตคูเป้ระดับพรีเมียมที่ผลิตโดย Toyota ซึ่งเป็นรถรุ่นที่ 5 ของโมเดล Supra โดยรถรุ่นนี้ได้รับความนิยมอย่างมากในวงการรถและความสนใจจากนักเล่นรถทั่วโลก</p>
                        </div>
                    </div>
                </div>
                <div class="carousel-item carousel-image-4">
                    <div class="container">
                        <div class="carousel-caption ">
                                <img style="height: 569px;" src="https://static.thairath.co.th/media/dFQROr7oWzulq5Fa5K3xraM8NPiMVq49V9FmDhQjF0YrhHCTHEX3B5RlVHZitDEaPJy.jpg" alt="">
                                  <h1 class="display-3">Adidas รองเท้าใช้แล้วรุ่น Limited</h1>
                                  <p class="">Adidas รุ่น Django_135 Limited ยืดได้เหมือนรูปภาพ</p>
                        </div>
                    </div>
                </div>
            </div>
    <section id="service" class="py-5" style="color: wheat;">
                <div class="container">
                    <div class="row">
                        <div class="col-md-4 text-center mb-4">
                            <span style=" font-size: 55px;" class="material-symbols-outlined">credit_card</span> 
                            <h2>Deposite Money </h2>
                             <p style=" font-size: 16px;">Please Deposite before auction</p>
                        </div>
                        <div class="col-md-4 text-center mb-4">
                            <span style=" font-size: 55px;" class="material-symbols-outlined"> local_atm</span>
                            <h2>Auction or Buying</h2>
                            <p style=" font-size: 16px;">You can buy and auction what you want to buy</p>
              
                        </div>
                        <div class="col-md-4 text-center mb-4">
                            <i class="fa-solid fa-rocket fa-3x"></i>
                            <span  style=" font-size: 55px;" class="material-symbols-outlined">done_outline</span>
                            <h2>Done</h2>
                             <p style=" font-size: 16px;">Done with your auction or buy and get that item</p>
                        </div>
                    </div>
                </div>
            </section>
        
        </div>
         
        <div style="flex:7">
            <p style="margin-left: 20px; margin-top: 20px;">- สินค้าที่กำลังทำการขาย/ประมูล</p>
            <div style="width: 100%; display: flex;flex-wrap: wrap;">
                {% if product %}
                    {% for key, value in product.items() %}
                        {% if value.status == "Active"%}
                            <div class="card">
                                <div style="min-height: 350px; display: flex; align-items: center;">
                                    <img src="{{ value.path }}" alt="Product Image" style="max-height: 100%;" >
                                </div>
                                <div class="card-content" style="height: 100%; display: flex; flex-direction: column;">
                                    <h2 class="product-name">{{ value.name }}</h2>
                                    <div class="description">
                                        <p>สถานะประมูล : {{ value.status }}</p>
                                        <p>ราคาเริ่มต้น :  {{ "{:,.0f}".format(value.start_price) }} ฿</p>
                                        <p>ราคาซื้อทันที : {{ "{:,.0f}".format(value.buy_price) }} ฿</p>
                                        <p id="id">ไอดีของสินค้า : {{ value.id }}</p>
                                    </div>
                                    <p class="price">ราคาปัจจุบัน : {{ "{:,.0f}".format(value.price) }} ฿</p>
                                    <br>
                                    <p id="datetime_{{ value.id }}" style="display: none;">{{ value.time }} {{ value.date }}</p>
                                    <div class="button-container" style="margin-top: auto; color:white;background-color: rgb(0, 168, 0);height: 35px; width: 100%; border: none; border-radius: 10px;">
                                        <a href="view_product/{{ value.id }}" class="cancel-button" style="width: 100%;height: 100%; display:flex; justify-content: center; align-items: center; text-decoration: none; color: white;">ทำการซื้อ / ประมูล</a>
                                    </div>
                                    <p id="timeDifference_{{ value.id }}" style="font-size: 20px; color:rgb(255, 0, 0); position: absolute; bottom: 40px;  width: 100%;">Time up!</p>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <div style="width: 100%; justify-content: center; display: flex; font-size: 18px; height: 600px; align-items: center;">
                        <p style="color:white">No products available.</p>
                    </div>
                {% endif %}

            </div>
        </div>
    </section>

</div>



   

    <!-- footer -->

    <footer class="text-center">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <p>Copyright &copy; Dja_ngo Official 2023</p>
                    </div>
                </div>
            </div>
    </footer>


    <!-- Modal -->
    <div class="modal fade " id="mymodal">
        <div class="modal-dialog bg-dark">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Contact for work</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form >
                        <div class="form-group">
                            <label >Email</label>
                            <input type="email" placeholder="Your email" class="form-control">
                        </div>
                        <div class="form-group">
                            <label >Topic</label>
                            <input type="text" placeholder="Your topic which you want to work with us." class="form-control">
                        </div>
                        <div class="form-group">
                            <label >Detail</label>
                            <textarea name="" id="" cols="30" rows="10" class="form-control"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-success">Submit</button>
                </div>
            </div>
        </div>
    </div>
        <!-- dont touch it not a bug -->
        <script>
            function updateTimeDifference(id, status) {
                var now = new Date();

                var datetimeElement = document.getElementById('datetime_' + id);

                // Check if the element exists
                if (datetimeElement) {
                    var datetimeStr = datetimeElement.innerText.trim();
                    var parts = datetimeStr.split(' ');
                    var timeParts = parts[0].split(':');
                    var dateParts = parts[1].split('-');

                    var targetDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2], timeParts[0], timeParts[1]);

                    var timeDiff = targetDate.getTime() - now.getTime();

                    var secondsDiff = Math.floor(timeDiff / 1000) % 60;
                    var minutesDiff = Math.floor(timeDiff / (1000 * 60)) % 60;
                    var hoursDiff = Math.floor(timeDiff / (1000 * 60 * 60));

                    if (timeDiff <= 0 && status === "Active") {
                        var product_id = id; // Get the product ID directly from the function parameter
                        fetch('/time_up/' + product_id)
                            .then(response => {
                                if (!response.ok) {
                                    throw new Error('Network response was not ok');
                                }
                                // Check if response is a redirection response
                                if (response.redirected) {
                                    // Redirect to the location specified in the response
                                    window.location.href = response.url;
                                }
                                return response.json(); // Assuming the response is JSON data
                            })
                            .then(data => {
                                console.log(data);
                            })
                            .catch(error => {
                                console.error('There was a problem with the fetch operation:', error);
                            });
                    } else {
                        var displayTime = hoursDiff + " hr, " + minutesDiff + " min, " + secondsDiff + " sec";
                        var timeDifferenceElement = document.getElementById('timeDifference_' + id);
                        if (timeDifferenceElement) {
                            timeDifferenceElement.innerText = displayTime;
                        }
                    }
                } else {
                    console.error('Element with ID "datetime_' + id + '" not found.');
                }
            }

            // it not a bug don't touch
            setInterval(function () {
                {% for key, value in product.items() %}
                    updateTimeDifference({{ value.id }}, "{{value.status}}"); // Added quotes around status
                {% endfor %}
            }, 1000);

        </script>

    
    {% include "footer.html" %}
  </body>
</html>



